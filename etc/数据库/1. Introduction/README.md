# :bar_chart: 数据库系统

[TOC]

---



## 数据库系统的结构

考察数据库系统的结构可以由不同的层次或不同的角度：

- 从数据库应用开发人员角度看，数据库系统通常采用三级模式结构

  > 数据库系统内部的系统结构

- 从数据库最终用户看，数据库系统分为单用户结构、主从式结构、分布式结构、客户-服务器、浏览器-应用服务器/数据库服务器多层结构等。

  > 这是数据库外部的体系结构

### 1. 数据库系统模式的概念

​	在数据模型中有“型”（type）和“值”（value）的概念。

- “型”是对某一类数据的结构和属性的说明
- “值”是型的一个具体赋值

> 例如，学生记录定义为（学号，姓名，性别，系别，年龄，籍贯）这样的记录型，而（2020010，李玉明，男，微电子系，21，山西西安市）则是该记录的一个记录值。

​	模式（schema）是数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及型的描述，不涉及具体的值；模式的一个具体值（这里的一个具体值可能是一张表）称为模式的一个实例（instance）。同一个模式可以有许多实例。

> 例如，在学生选课数据库模式中包含学生记录、课程记录和学生选课记录，现有一个具体的学生选课数据库实例，给市里包含了2020年学校中所有学生的记录、学校开设的所有课程的记录和所有学生选课的记录。

模式是相对稳定的，而是实例相对变动的，因为数据库中的数据是在不断更新的，模式反映的是数据的结构及其联系，而实例反映的是数据库某一时刻的状态。

> 2012年度学生选课数据库模式对应的实例与2013年度学生学生选课数据模式对应的实例是不同的。实际上2013年度学生选课数据库的实例也会随着时间变化，因为该年度有的学生可能退学（真是个悲伤的故事:full_moon_with_face: ），有的学生转系。各个时刻学生选课数据库的实例是不同的、在变化的、不变的是学生选课数据库模式。

### 2. 数据库系统的三级模式结构

> > 虽然实际的数据管理系统产品种类很多，它们支持不同的数据类型，使用不同的数据库语言，建立在不同的操作系统之上，数据的存储结构也各不相同，但它们在体系结构上通常都具有相同的特征，即采用三级模式结构（早起为机上的小型数据库系统除外）并提供两级映像功能。

数据库系统的三级模式结构是指数据库系统是由外模式、模式和内模式三级构成，如下图：

<img src="https://github.com/terminator-128/FairLand.github.io/raw/master/pictures/Three_Levels_of_Schema.png" style="width:80%;" />

#### （1）模式（schema）

​	**模式**也称**逻辑模式**，是数据库中**全体数据的逻辑结构和特征描述**，是**所有用户的公共数据视图**。

> 它是数据库系统模式结构的中间层，既不涉及数据的物理存储细节和硬件环境，又与具体的应用程序、所使用的应用开发工具及高级程序设计语言无关。

​	模式实际上是数据库数据在逻辑级上的视图。**一个数据库只有一个模式**。数据库模式以一种数据模型为基础，统一考虑了所有用户的需求，并将这些需求有机地结合成一个逻辑整体。

> 定义模式时不仅要定义数据的逻辑结构，例如数据记录有哪些数据项构成，数据项的名字、类型、取值范围等；而且要定义数据之间的联系，定义与数据有关的安全性、完整性要求。

​	**数据库管理系统提供模式数据定义语言**（模式DDL）来严格地定义模式。

#### （2）外模式（external schema）

​	**外模式**也称**子模式**（subschema）或**用户模式**，它是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的**数据视图**，是与**某一应用**有关的数据的逻辑表示。

> 外模式通常是模式的子集，一个数据库可以有多个外模式，由于它是各个用户的数据视图，如果不同的用户在应用需求、看待数据的方式、对数据保密的要求存在差异，则其外模式的描述就是不同的。既是对模式中同一数据，在外模式中的结构、类型、长度、保密级别等都可以不同。另一方面，同一外模式也可以为某一用户的讴歌应用系统所使用，但一个应用程序只能使用一个外模式。

外模式是保证数据库安全性的一个有力措施。每个用户**只能看见和访问所对应的外模式中的数据**，数据库中的其余数据是**不可见**（透明）的。

**数据库管理系统提供外模式数据定义语言**（外模式DDL）来严格定义外模式。

#### （3）内模式（internal schema）

​	**内模式**也称**存储模式**（storage schema），一个数据库只有一个内模式。它是数据模式结构和存储方式的描述，是数据在数据库内部的组织方式。

> 例如，记录的存储方式是按照对存储还是按照某个（些）属性值的升（降）序存储，或按照属性值聚簇（cluster）存储；索引按照什么方式组织，是B+树还是hash索引；数据是否压缩存储，是否加密；数据的存储记录结构有何规定，如定长结构还是变长结构，一个记录不能跨物理页存储；等等。

### 3. 数据库的二级映像与数据独立性

> 数据库系统的三级模式是数据的三个抽象级别，它把数据的具体组织留给数据库管理系统管理，使用户能逻辑地抽象地处理数据，而不必关心数据在计算机中的具体表示方式与存储方式。

为了能够在系统内部实现三个抽象层次的联系和转换，数据库管理系统在这三级模式之间提供了两层映像；外模式/模式映象和模式/内模式映像。

> 正是这两层映像保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。

#### （1）外模式/模式映像

​	模式描述的是全局的逻辑结构，外模式描述的是数据的局部逻辑结构。对应于同一个模式可以有任意多个外模式。对于每一个外模式，数据库系统都有一个外模式/模式映像，它定义了该外模式与模式之间的对应关系。

> 这些映像的定义通常包含在各自外模式的描述中。

当模式改变时（例如增加新的关系、新的属性、改变属性的数据类型等），由数据库管理员对各个外模式/模式的映像作相应改变，可以使外模式保持不变。应用程序是根据数据的外模式编写的，从而应用数据不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。

#### （2）模式/内模式映像	

​	数据库中只有一个模式，也只有一个内模式，所以模式/内模式映像是唯一的，它定义了数据全局逻辑结构与存储结构之间的对应关系。

> 例如，说明逻辑记录和字段在内部是如何表示的。该映像定义通常包含在模式描述中。

当数据库的存储结构改变时（例如选用了另一种存储结构），由数据库管理员对模式/内模式映像做出相应改变可以使模式保持不变，从而应用程序也不必改变。保证了数据与程序的物理独立性，简称数据的物理独立性。



---



## 数据库系统的组成

数据库系统一般由数据库、数据库管理系统（及其应用开发工具）、应用程序和数据库管理员构成。

> 也就是suo，数据库系统实际上是个人机系统。

具体怎么样自己分别查查吧，Google一下或百度一下，你就知道了。

<img src="https://github.com/terminator-128/FairLand.github.io/raw/master/pictures/Componet_of_database.jpg" style="width:66%;float:left;margin:1cm" />